

git clone https://github.com/jwsources/dh-sfdx-demo.git
cd dh-sfdx-demo
git checkout Package

Authorize Dev Hub
sfdx help force:auth:web:login
sfdx force:auth:web:login -d -a MyDevHub

sfdx force:config:list

sfdx force:org:create -s -f config/project-scratch-def.json -d 1 -a "dhpackage"
Using Shane's plugin
sfdx shane:org:create -u jwadmin -o whizzhouse.demo -a dhsfdx -d 30 -s -f config/project-scratch-def.json

sfdx force:org:list

UI: Open scratch org
sfdx force:org:open
sfdx force:source:status

Packaging (DCP FAQ, https://sfdc-db-gmail.github.io/)
sfdx force:package:create --packagetype Unlocked --nonamespace --name packagedemo01 --path force-app -d "DH Demo Package"
sfdx force:package:list

!! Package creation edits the "packageDirectories" section of the sfdx-project.json file in your project and adds a new packageAliases section
!! Check the packageAliases, it matches the 0Ho ID that you got
!! Make sure packageID is in your sfdx-project.json file

sfdx force:package:version:create -p packagedemo01 -d force-app -w 20 --installationkeybypass
(or --installationkey Salesforce5)

//sfdx force:package:version:create:list
//sfdx force:org:create --noancestors --nonamespace -f config/project-scratch-def.json -a "dreamhouse" -s -d 1

sfdx force:package:install --wait 10 --publishwait 10 --package packagedemo01@0.5.0-1 -r -u dhpack

Change Metadata to include in a new version
sfdx force:package:version:create -p package-build -d force-app -w 20 --installationkeybypass (or --installationkey Salesforce5)
sfdx force:package:install --wait 10 --publishwait 10 --package package-build@1.0.0-2 -r -u dhdemo

tested and ready for release
sfdx force:package:version:promote -p packagedemo01@0.5.0-2
sfdx force:package:version:list --createdlastdays 1 --verbose --orderby PatchVersion

sfdx force:package:version:update -p sfdx-build@[VERSION_FROM_PROJECT.JSON]

Install via
https://<DOMAIN_PREFIX>.lightning.force.com/packagingSetupUI/ipLanding.app?apvId=<04t_id>
https://jwsdh-dev-ed.lightning.force.com/packagingSetupUI/ipLanding.app?apvId=04t0Y000002aB3WQAU with apvId is the <04t_id> Package2 Version Id




Push source:
sfdx force:source:push -u "dreamhouse"
sfdx force:user:permset:assign -n dreamhouse
sfdx force:data:tree:import --plan ./data/sample-data-plan.json
sfdx force:user:password:generate -u "dreamhouse"
sfdx force:org:display -u "dreamhouse"

Run test classes:
sfdx force:apex:test:run --tests BotTest --resultformat human --synchronous --loglevel error

sfdx force:source:pull -u "dreamhouse"

Debug in Scratch org (https://andyinthecloud.com/2018/03/14/streaming-apex-logs-to-your-console/):
sfdx force:apex:log:tail --color

sfdx force:org:delete -u "dreamhouse"

Push to Demo org
mkdir mdapiout
sfdx force:source:convert -d mdapiout
sfdx force:mdapi:deploy -d mdapiout -u "MyStagingSB" --testlevel NoTestRun --wait 2

Alternative via
Next CI: UI Git Push



NOTES:

Blogs
SFDX Wade: http://www.wadewegner.com/

Plugins
sfdx plugins:install sfdx-mobilesdk-plugin
Use:
  sfdx mobilesdk:reactnative:create
    --platform ios
    --appname demo1
    --packagename com.wadewegner.demo1
    --organization WadeWegner.com
    --outputdir mobile

Wade plugin
sfdx plugins:install sfdx-waw-plugin

sfdx plugins:install sfdx-msm-plugin
Oclif version of Shane plugin: https://github.com/mshanemc/shane-sfdx-plugins
sfdx plugins:install shane-sfdx-plugins

Github
Generate code snippets from templates: https://github.com/wadewegner/sfdx-code-gen
Convert WSDL to Apex: https://github.com/wadewegner/sfdx-wsdl2apex-plugin



sfdx waw:connectedapp:create -c http://localhost:1717/OauthRedirect -e jweijters@salesforce.com -s Basic,Api,Web,RefreshToken -n jwtrulz -u MyDevHub
{"fullName":"jwtrulz","contactEmail":"jweijters@salesforce.com","description":"generated by waw:connectedapp:create","label":"jwtrulz","oauthConfig":{"callbackUrl":"http://localhost:1717/OauthRedirect","consumerKey":"3MVG9HxRZv05HarRqk.8mnjD4Ur27Ipfh.rKejlRSmmSK1iv86VnXnW0yg1gtNs76S8Hr7oCnCFFWfu1RlQL_","scopes":["Basic","Api","Web","RefreshToken"],"consumerSecret":"CSG6G49EH"}}
